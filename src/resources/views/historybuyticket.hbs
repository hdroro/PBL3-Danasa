<div class="app" style="background-color: #F5F5F5;">
    <header class="header">
        <div class="grid">
            <nav class="header__navbar">
                <ul class="header__navbar-list-left">
                    <li class="header__navbar-item">
                        <a href="/" class="header__navbar-item-link">DANASA
                        </a>
                    </li>
                    <div class="pentagon"></div>
                </ul>

                <ul class="header__navbar-list-right">
                    <li class="header__navbar-item">
                        <a href="/" class="header__navbar-item-link">Trang chủ</a>
                    </li>
                    <li class="header__navbar-item">
                        <a href="/news" class="header__navbar-item-link">Tin tức</a>
                    </li>
                    <li class="header__navbar-item">
                        <a href="/contact" class="header__navbar-item-link">Liên hệ</a>
                    </li>
                    <li class="header__navbar-item header__navbar-item-dropdown">
                        <a href="/login" class="header__navbar-item-link link-name">{{infoLogin}}</a>
                        <div class="menu-show-container" id="dropdown">
                            <div class="user">
                                <i class="fa-solid fa-circle-user"></i>
                                <h3>{{isLoggedIn}}</h3>
                            </div>
                            <div class="button">
                                <ul>
                                    <li class="li-dropdown">
                                        <i class="fa-solid fa-clock-rotate-left" style="color:var(--text-color)"></i>
                                        <span>
                                            <a class="itemm" href="/history-buy-ticket">
                                                Lịch sử đặt vé
                                            </a>
                                        </span>
                                    </li>
                                    <li class="li-dropdown">
                                        <i class="fa-solid fa-user-large" style="color:var(--text-color)"></i>
                                        <span><a href="/updateinfo">
                                                Thông tin cá nhân
                                            </a></span>
                                    </li>
                                    <li class="li-dropdown">
                                        <i class="fa-solid fa-user-pen" style="color:var(--text-color)"></i>
                                        <span><a href="/change-password">
                                                Thay đổi mật khẩu
                                            </a></span>
                                    </li>
                                    <li class="li-dropdown">
                                        <i class="fa-solid fa-right-from-bracket" style="color:var(--text-color)"></i>
                                        <span><a href="/login/logout">
                                                Đăng xuất
                                            </a></span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <script>
        const dropdown = document.getElementById("dropdown");
        const infoLogin = "{{infoLogin}}";
        if (infoLogin === "Đăng nhập") {
            dropdown.style.display = "none";
        }
    </script>

    <div class="container__ticketseller">
        <div class="grid">
            <div class="contain__ticketseller-banner" style="width: 1120px;">
                <img src="./img/banner.png" alt="Banner" width="1120px" height="456px" />
            </div>
            <div class="contain__ticketseller-head">
                <i class="fa-solid fa-clock-rotate-left"></i>
                <h2>
                    <a href="/history-buy-ticket" style="text-decoration: none;color: #4b8efa;">LỊCH SỬ ĐẶT VÉ</a>
                </h2>
                <div class="line-straight"> </div>
            </div>
            <div class="container__content-choose">
                <div class="container__content-choose-filter">
                    <div class="custom-choose-filter-container">
                        <select class="filter-select" name="" id="searchByStartProvince" fdprocessedid="jxlvcl"
                            onchange="loadDataStartProvince()">
                            <option value="0" selected="selected" style="display: none;">Tỉnh đi</option>
                            {{#each listStartProvince}}
                            <option value="{{id_start}}">{{startProvinceName}}</option>
                            {{/each}}
                        </select>

                        <select class="filter-select" name="" id="searchByEndProvince" fdprocessedid="jxlvcl"
                            onchange="loadDataEndProvince()">
                            <option value="0" selected="selected" style="display: none;">Tỉnh đến</option>
                            {{#each listEndProvince}}
                            <option value="{{id_end}}">{{endProvinceName}}</option>
                            {{/each}}
                        </select>

                        {{!-- <select class="filter-select" name="" id="searchByTime" fdprocessedid="14b6h"
                            onchange="loadDataTime()">
                            <option value="0" selected="selected" style="display: none;">Thời gian</option>
                            {{#each listTimeStart}}
                            <option value="{{id_time}}">{{startTime}}</option>
                            {{/each}}
                        </select> --}}
                    </div>
                    <h1 style="padding: 2rem 40rem; text-align: center;  color: #f21036;">{{message}}</h1>
                    <div class="list-history" id="dataList">
                        {{#each historyList}}
                        <div class="container__content-route-history">
                            <div class="header-time">
                                {{startTime}}
                                <i class="fa-solid fa-arrow-right"></i>
                                {{endTime}}
                                <span class="date-go">
                                    {{startDate}}
                                </span>
                                <div class="utilities">
                                    <i class="fa-sharp fa-solid fa-mug-hot"></i>
                                    <i class="fa-solid fa-bed"></i>
                                    <i class="fa-sharp fa-solid fa-wifi"></i>
                                </div>
                            </div>
                            <div class="route-line-container">
                                <div class="route-line-list">
                                    <div class="route-line goFrom">
                                        <i class="fa-solid fa-circle-dot"></i>
                                        {{startStation}}
                                        <div class="route">Xe tuyến: {{distance}} km - {{hour}} tiếng</div>
                                    </div>

                                    <div class="route-line destination">
                                        <i class="fa-solid fa-location-dot"></i>
                                        {{endStation}}
                                    </div>
                                </div>
                            </div>

                            <div class="info-ticket">
                                <div class="info-slot" style="color: #676161;">
                                    Số ghế: <span style="color: black; font-weight: 600;">{{nameSeat}}</span>
                                </div>

                                <div class="price-ticket">
                                    <span class="title-money">TỔNG TIỀN</span>
                                    <span class="price"
                                        style="color: #4B8EFA; font-weight: 600; padding-left: 10px;">{{Totalprice}}đ</span>
                                </div>
                            </div>
                        </div>
                        {{/each}}

                        <div class="index">
                            <ul class="page-index inline">
                                <li class="page-item">
                                    {{#if prev}}
                                    <a href="/history-buy-ticket?page={{prev}}" class="page-link arrow">
                                        <i class="fa-solid fa-arrow-left"></i>
                                    </a>
                                    {{else}}
                                    <a class="page-link arrow disabled" disabled>
                                        <i class="fa-solid fa-arrow-left"></i>
                                    </a>
                                    {{/if}}
                                </li>
                                <li class="page-item page-now">
                                    <a class="page-link disable-page">{{current}}</a>
                                </li>
                                <li class="page-item">
                                    {{#if next}}
                                    <a href="/history-buy-ticket?page={{next}}" class="page-link arrow">
                                        <i class="fa-solid fa-arrow-right"></i>
                                    </a>
                                    {{else}}
                                    <a class="page-link arrow disabled" disabled>
                                        <i class="fa-solid fa-arrow-right"></i>
                                    </a>
                                    {{/if}}
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <footer class="footer">
        <div class="grid">
            <div class="grid__row-footer">
                <div class="col grid__column-intro">
                    <div class="col__column-inner">
                        <img width="220" height="150" src="./img/footer_danasa.png"
                            class="attachment-original size-original" alt="">
                        <div class="icon-box-text last-reset">
                            <p style="width: 60%; text-align-last: center;">Công ty cổ phần xe khách Danasa Bus
                                Lines</p>
                        </div>

                        <div class="social-icons follow-icons">
                            <i class="fa-brands fa-facebook"></i>
                            <i class="fa-brands fa-instagram"></i>
                            <i class="fa-brands fa-twitter"></i>
                        </div>
                    </div>
                </div>

                <div class="col grid__column-lienhe">
                    <div class="col-inner">
                        <h3 style="padding-right: -20px;width: 250px;">THÔNG TIN LIÊN HỆ</h3>
                        <div class="icon-box icon-box-left text-left">
                            <div class="icon-box-img" style="width: 100%">
                                <i class="fa-solid fa-location-dot"></i>
                                <div class="icon-box-text last-reset">
                                    <p style="width: 90%; ">54 Nguyễn Lương Bằng, Hòa Khánh Bắc,
                                        Liên Chiểu, Đà Nẵng </p>
                                </div>
                            </div>
                        </div>

                        <div class="icon-box icon-box-left text-left">
                            <div class="icon-box-img" style="width: 70%">
                                <i class="fa-solid fa-phone" style="font-size: 17px;"></i>
                                <div class="icon-box-text last-reset">
                                    <p>076 922 0162</p>
                                </div>
                            </div>

                            <div class="icon-box icon-box-left text-left">
                                <div class="icon-box-img" style="width: 70%">
                                    <i class="fa-solid fa-envelopes-bulk" style="font-size: 17px;"></i>
                                    <div class="icon-box-text last-reset">
                                        <p>dt.dhbk@dut.udn.vn</p>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <div class="col grid__column-hinhanh">
                    <div class="col-inner">
                        <h3>HÌNH ẢNH</h3>
                        <div class="grid__row-3-col-3">
                            <div class="galary-col col">
                                <div class="container">
                                    <img src="./img/xe_do.jpg" alt="Xe đỏ">
                                    <img src="./img/xe_xanh2.jpg" alt="Xe đỏ">
                                </div>
                                <div class="container">
                                    <img src="./img/xe_xanh1.jpg" alt="Xe đỏ">
                                    <img src="./img/xe_do2.jpg" alt="Xe đỏ">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col grid__column-dangky">
                    <div class="col-inner">
                        <h3 style="width: 250px;">ĐĂNG KÝ</h3>
                        <p>Đăng ký để nhận được thông tin mới nhất từ chúng tôi.</p>
                        <div role="form">
                            <form>
                                <p>
                                    <span class="email-dang-ky">
                                        <input type="email" name="email-dang-ky" value="" size="35"
                                            placeholder="Email..." class="nhapEmail">
                                    </span>
                                <div class="email-btn-dang-ky">
                                    <input type="submit" value="Đăng ký" class="btnDangKy">
                                </div>
                                </p>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="line-straight-footer"></div>
    </footer>
</div>

<script>
    function loadDataStartProvince() {
        var endProvinceSelect = document.getElementById("searchByEndProvince");
        endProvinceSelect.selectedIndex = 0;
        var sortData_start_province = document.getElementById('searchByStartProvince').value;
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById('dataList').innerHTML = this.responseText;
            }
        };
        xhttp.open('GET', '/history-buy-ticket/loadData-search-by-start-province?sortData=' + sortData_start_province, true);
        xhttp.send();
    }
</script>

<script>
    function loadDataEndProvince() {
        var startProvinceSelect = document.getElementById("searchByStartProvince");
        startProvinceSelect.selectedIndex = 0;
        var sortData_end_province = document.getElementById('searchByEndProvince').value;
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById('dataList').innerHTML = this.responseText;
            }
        };
        xhttp.open('GET', '/history-buy-ticket/loadData-search-by-end-province?sortData=' + sortData_end_province, true);
        xhttp.send();
    }

</script>

<script>
    const linkName = document.querySelector('.link-name');
    if (linkName.innerHTML !== "Đăng nhập") {
        linkName.href = "#";
    }
</script>